<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Watch Ads & Earn Money - Mobile</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’°</text></svg>">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Monetag SDK -->
    <script src='//libtl.com/sdk.js' data-zone='10265430' data-sdk='show_10265430'></script>
    
    <style>
        /* Prevent text selection on mobile */
        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Allow text selection for specific elements */
        .selectable {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            html {
                font-size: 15px;
            }
            
            button, a {
                min-height: 44px; /* Minimum touch target size */
                min-width: 44px;
            }
            
            .touch-target {
                padding: 12px 16px;
            }
        }
        
        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes coinSpin {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }
        
        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Loading spinner */
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid #fff;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Gradient backgrounds */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-card {
            background: linear-gradient(145deg, rgba(30, 30, 40, 0.95), rgba(20, 20, 30, 0.95));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Safe area for notch phones */
        .safe-area-top {
            padding-top: env(safe-area-inset-top, 0);
        }
        
        .safe-area-bottom {
            padding-bottom: env(safe-area-inset-bottom, 0);
        }
        
        /* Hide scrollbar but keep functionality */
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen safe-area-top safe-area-bottom">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-gray-900 z-50 flex flex-col items-center justify-center">
        <div class="relative mb-6">
            <div class="w-20 h-20 rounded-full bg-gradient-to-r from-yellow-500 to-yellow-300 flex items-center justify-center">
                <i class="fas fa-coins text-3xl text-white"></i>
            </div>
            <div class="absolute -inset-2 border-4 border-yellow-500/30 rounded-full animate-ping"></div>
        </div>
        <h2 class="text-xl font-bold mb-2">Loading Earning System</h2>
        <p class="text-gray-400 text-center px-8">Preparing your earning dashboard...</p>
        <div class="spinner mt-6"></div>
    </div>

    <!-- Main Container -->
    <div id="mainContent" class="hidden max-w-md mx-auto px-4 py-4">
        <!-- Header -->
        <header class="mb-6 pt-2">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center">
                    <div class="relative mr-3">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-r from-yellow-500 to-yellow-300 flex items-center justify-center shadow-lg">
                            <i class="fas fa-coins text-xl text-white"></i>
                        </div>
                        <div class="absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full animate-ping"></div>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">Earn Real Cash</h1>
                        <p class="text-xs text-gray-400">Watch ads & withdraw instantly</p>
                    </div>
                </div>
                <button id="infoBtn" class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center">
                    <i class="fas fa-info text-gray-400"></i>
                </button>
            </div>
        </header>

        <!-- Balance Card -->
        <div class="gradient-card rounded-2xl p-5 mb-5 shadow-2xl">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <p class="text-gray-400 text-sm mb-1">Total Earnings</p>
                    <h2 class="text-3xl font-bold gradient-text">$<span id="totalEarnings">0.00</span></h2>
                    <p class="text-xs text-gray-500 mt-1">Available for withdrawal</p>
                </div>
                <div class="text-right">
                    <div class="inline-block bg-green-900/30 text-green-400 text-xs font-bold px-3 py-1 rounded-full">
                        <i class="fas fa-bolt mr-1"></i>LIVE
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-4 mb-5">
                <div class="bg-gray-800/50 rounded-xl p-3">
                    <p class="text-gray-400 text-xs mb-1">Ads Watched</p>
                    <p class="text-lg font-bold text-blue-300" id="adsCount">0</p>
                </div>
                <div class="bg-gray-800/50 rounded-xl p-3">
                    <p class="text-gray-400 text-xs mb-1">Today</p>
                    <p class="text-lg font-bold text-green-300" id="todayEarnings">$0.00</p>
                </div>
            </div>
            
            <!-- Progress Bar -->
            <div class="mb-1">
                <div class="flex justify-between text-xs mb-2">
                    <span class="text-gray-400">Progress</span>
                    <span class="font-bold" id="progressPercent">0%</span>
                </div>
                <div class="h-2 bg-gray-800 rounded-full overflow-hidden">
                    <div id="progressBar" class="h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
            <p id="progressText" class="text-xs text-center text-gray-300 mt-3">
                Need $10.00 to withdraw
            </p>
        </div>

        <!-- Watch Ad Button -->
        <div class="gradient-card rounded-2xl p-5 mb-5 text-center relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-purple-500"></div>
            
            <div class="mb-5">
                <div class="inline-block p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full mb-3">
                    <i class="fas fa-play text-2xl"></i>
                </div>
                <h3 class="text-lg font-bold mb-1">Watch Ad & Earn Cash</h3>
                <p class="text-gray-400 text-sm">Tap to watch ad and earn instantly</p>
            </div>
            
            <button id="watchAdBtn" class="w-full gradient-bg text-white font-bold py-4 px-6 rounded-xl text-lg shadow-lg active:scale-95 transition-transform duration-150 touch-target">
                <i class="fas fa-play-circle mr-2"></i>WATCH AD & EARN $0.10
            </button>
            
            <div class="mt-4 p-3 bg-green-900/20 rounded-lg border border-green-800/30">
                <div class="flex items-center justify-center">
                    <i class="fas fa-check-circle text-green-400 mr-2"></i>
                    <span class="text-sm">Guaranteed $0.10 per ad</span>
                </div>
            </div>
        </div>

        <!-- Withdrawal Section -->
        <div class="gradient-card rounded-2xl p-5 mb-5">
            <h3 class="text-lg font-bold mb-4 flex items-center">
                <i class="fas fa-wallet mr-2 text-green-400"></i>Withdraw Earnings
            </h3>
            
            <div id="withdrawalMethods" class="space-y-3 mb-4">
                <!-- UPI Method -->
                <div id="upiMethod" class="bg-gray-800/50 rounded-xl p-4 border border-gray-700 opacity-60">
                    <div class="flex items-center">
                        <div class="bg-gradient-to-r from-purple-600 to-indigo-600 w-12 h-12 rounded-lg flex items-center justify-center mr-3">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-bold">UPI Transfer</h4>
                            <p class="text-xs text-gray-400">Instant to Indian banks</p>
                        </div>
                        <div class="text-right">
                            <div class="text-xs text-gray-500 mb-1">Min $10</div>
                            <i class="fas fa-lock text-gray-500"></i>
                        </div>
                    </div>
                </div>
                
                <!-- PayPal Method -->
                <div id="paypalMethod" class="bg-gray-800/50 rounded-xl p-4 border border-gray-700 opacity-60">
                    <div class="flex items-center">
                        <div class="bg-gradient-to-r from-blue-600 to-cyan-600 w-12 h-12 rounded-lg flex items-center justify-center mr-3">
                            <i class="fab fa-paypal text-white text-xl"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-bold">PayPal</h4>
                            <p class="text-xs text-gray-400">Instant worldwide</p>
                        </div>
                        <div class="text-right">
                            <div class="text-xs text-gray-500 mb-1">Min $10</div>
                            <i class="fas fa-lock text-gray-500"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="bg-yellow-900/20 rounded-lg p-3 border border-yellow-800/30">
                <div class="flex items-center">
                    <i class="fas fa-lock text-yellow-400 mr-2"></i>
                    <p class="text-xs">Reach $10.00 to unlock withdrawal options</p>
                </div>
            </div>
        </div>

        <!-- Activity Log -->
        <div class="gradient-card rounded-2xl p-5 mb-8">
            <h3 class="text-lg font-bold mb-4 flex items-center">
                <i class="fas fa-history mr-2 text-blue-400"></i>Recent Activity
            </h3>
            
            <div id="activityLog" class="space-y-3 max-h-64 overflow-y-auto hide-scrollbar">
                <div class="text-center py-6">
                    <i class="fas fa-coins text-gray-600 text-2xl mb-2"></i>
                    <p class="text-gray-500 text-sm">No earnings yet</p>
                    <p class="text-gray-600 text-xs">Watch ads to see your earnings here</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center pb-8 pt-4">
            <div class="text-xs text-gray-500 mb-2">
                <p>âš¡ Powered by Monetag Ads</p>
                <p class="mt-1">Earnings credited instantly after watching ads</p>
            </div>
            <div class="text-xs text-gray-600">
                <p>Â© 2024 Earn Cash App. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Info Modal -->
    <div id="infoModal" class="fixed inset-0 bg-black bg-opacity-80 z-50 flex items-center justify-center p-4 hidden">
        <div class="gradient-card rounded-2xl w-full max-w-md p-5 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold">How It Works</h3>
                <button id="closeInfoModal" class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div class="flex items-start">
                    <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center mr-3 flex-shrink-0">
                        <span class="text-white font-bold">1</span>
                    </div>
                    <div>
                        <h4 class="font-bold mb-1">Watch Ads</h4>
                        <p class="text-sm text-gray-400">Tap "Watch Ad" button to view a short advertisement</p>
                    </div>
                </div>
                
                <div class="flex items-start">
                    <div class="w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center mr-3 flex-shrink-0">
                        <span class="text-white font-bold">2</span>
                    </div>
                    <div>
                        <h4 class="font-bold mb-1">Earn Money</h4>
                        <p class="text-sm text-gray-400">Earn $0.10 for every ad you watch completely</p>
                    </div>
                </div>
                
                <div class="flex items-start">
                    <div class="w-8 h-8 rounded-full bg-green-600 flex items-center justify-center mr-3 flex-shrink-0">
                        <span class="text-white font-bold">3</span>
                    </div>
                    <div>
                        <h4 class="font-bold mb-1">Withdraw</h4>
                        <p class="text-sm text-gray-400">Withdraw your earnings once you reach $10 minimum</p>
                    </div>
                </div>
                
                <div class="bg-blue-900/20 rounded-lg p-4 mt-4 border border-blue-800/30">
                    <h4 class="font-bold mb-2 text-blue-300">Important Notes</h4>
                    <ul class="text-xs text-gray-300 space-y-1">
                        <li class="flex items-start">
                            <i class="fas fa-check mr-2 text-green-400 mt-0.5"></i>
                            <span>Ads may take a moment to load - please be patient</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check mr-2 text-green-400 mt-0.5"></i>
                            <span>Earnings are updated instantly after ad completion</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check mr-2 text-green-400 mt-0.5"></i>
                            <span>Ensure stable internet connection for best experience</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="fixed top-4 right-4 left-4 z-40 bg-gray-800 rounded-xl p-4 shadow-2xl transform translate-y-[-100px] transition-transform duration-300">
        <div class="flex items-center">
            <div id="toastIcon" class="w-10 h-10 rounded-full bg-green-600 flex items-center justify-center mr-3">
                <i class="fas fa-check text-white"></i>
            </div>
            <div class="flex-1">
                <h4 id="toastTitle" class="font-bold"></h4>
                <p id="toastMessage" class="text-sm text-gray-300"></p>
            </div>
            <button id="closeToast" class="ml-2">
                <i class="fas fa-times text-gray-400"></i>
            </button>
        </div>
    </div>

    <script>
        // State Management
        const state = {
            totalEarnings: 0,
            adsWatched: 0,
            todayEarnings: 0,
            todayDate: new Date().toDateString(),
            activityLog: [],
            isAdLoading: false
        };

        // DOM Elements
        const elements = {
            loadingScreen: document.getElementById('loadingScreen'),
            mainContent: document.getElementById('mainContent'),
            totalEarnings: document.getElementById('totalEarnings'),
            adsCount: document.getElementById('adsCount'),
            todayEarnings: document.getElementById('todayEarnings'),
            progressBar: document.getElementById('progressBar'),
            progressPercent: document.getElementById('progressPercent'),
            progressText: document.getElementById('progressText'),
            watchAdBtn: document.getElementById('watchAdBtn'),
            upiMethod: document.getElementById('upiMethod'),
            paypalMethod: document.getElementById('paypalMethod'),
            activityLog: document.getElementById('activityLog'),
            infoBtn: document.getElementById('infoBtn'),
            infoModal: document.getElementById('infoModal'),
            closeInfoModal: document.getElementById('closeInfoModal'),
            toast: document.getElementById('toast'),
            toastTitle: document.getElementById('toastTitle'),
            toastMessage: document.getElementById('toastMessage'),
            toastIcon: document.getElementById('toastIcon'),
            closeToast: document.getElementById('closeToast')
        };

        // Initialize App
        function initApp() {
            // Check date reset
            checkDateReset();
            
            // Load saved data
            loadSavedData();
            
            // Update UI
            updateUI();
            
            // Show main content
            setTimeout(() => {
                elements.loadingScreen.style.display = 'none';
                elements.mainContent.classList.remove('hidden');
                elements.mainContent.style.animation = 'slideUp 0.5s ease-out';
                
                showToast('Welcome!', 'Ready to start earning? Tap Watch Ad to begin.');
            }, 1000);
            
            // Setup event listeners
            setupEventListeners();
            
            // Log initialization
            console.log('Earn Cash App initialized');
            console.log('Monetag Zone: 10265430');
            console.log('Rewarded interstitial ads ready');
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Watch Ad Button
            elements.watchAdBtn.addEventListener('click', handleWatchAd);
            
            // Info Button
            elements.infoBtn.addEventListener('click', () => {
                elements.infoModal.classList.remove('hidden');
                elements.infoModal.style.animation = 'fadeIn 0.3s ease-out';
            });
            
            // Close Info Modal
            elements.closeInfoModal.addEventListener('click', () => {
                elements.infoModal.classList.add('hidden');
            });
            
            // Close Toast
            elements.closeToast.addEventListener('click', hideToast);
            
            // Close modal on outside click
            elements.infoModal.addEventListener('click', (e) => {
                if (e.target === elements.infoModal) {
                    elements.infoModal.classList.add('hidden');
                }
            });
            
            // Handle UPI withdrawal
            elements.upiMethod.addEventListener('click', () => {
                if (state.totalEarnings >= 10) {
                    handleWithdrawal('upi');
                }
            });
            
            // Handle PayPal withdrawal
            elements.paypalMethod.addEventListener('click', () => {
                if (state.totalEarnings >= 10) {
                    handleWithdrawal('paypal');
                }
            });
            
            // Handle visibility change (when ad completes and user returns)
            document.addEventListener('visibilitychange', () => {
                if (!document.hidden && state.isAdLoading) {
                    // User returned to app, check if ad was completed
                    setTimeout(() => {
                        if (state.isAdLoading) {
                            state.isAdLoading = false;
                            enableWatchButton();
                            showToast('Ad Interrupted', 'Please watch the full ad to earn rewards', 'warning');
                        }
                    }, 1000);
                }
            });
        }

        // Check Date Reset
        function checkDateReset() {
            const today = new Date().toDateString();
            if (state.todayDate !== today) {
                state.todayDate = today;
                state.todayEarnings = 0;
                saveData();
            }
        }

        // Load Saved Data
        function loadSavedData() {
            try {
                const saved = localStorage.getItem('earnCashAppData');
                if (saved) {
                    const data = JSON.parse(saved);
                    
                    // Check if it's the same day
                    const today = new Date().toDateString();
                    if (data.todayDate === today) {
                        state.totalEarnings = data.totalEarnings || 0;
                        state.adsWatched = data.adsWatched || 0;
                        state.todayEarnings = data.todayEarnings || 0;
                        state.todayDate = data.todayDate;
                        state.activityLog = data.activityLog || [];
                    } else {
                        // Reset daily earnings for new day
                        state.totalEarnings = data.totalEarnings || 0;
                        state.adsWatched = data.adsWatched || 0;
                        state.todayEarnings = 0;
                        state.todayDate = today;
                        state.activityLog = data.activityLog || [];
                    }
                }
            } catch (error) {
                console.error('Error loading saved data:', error);
                // Reset to defaults
                state.totalEarnings = 0;
                state.adsWatched = 0;
                state.todayEarnings = 0;
                state.todayDate = new Date().toDateString();
                state.activityLog = [];
            }
        }

        // Save Data
        function saveData() {
            try {
                const data = {
                    totalEarnings: state.totalEarnings,
                    adsWatched: state.adsWatched,
                    todayEarnings: state.todayEarnings,
                    todayDate: state.todayDate,
                    activityLog: state.activityLog.slice(0, 20) // Keep last 20 entries
                };
                localStorage.setItem('earnCashAppData', JSON.stringify(data));
            } catch (error) {
                console.error('Error saving data:', error);
            }
        }

        // Update UI
        function updateUI() {
            // Update numbers
            elements.totalEarnings.textContent = state.totalEarnings.toFixed(2);
            elements.adsCount.textContent = state.adsWatched;
            elements.todayEarnings.textContent = `$${state.todayEarnings.toFixed(2)}`;
            
            // Update progress
            const progressPercent = Math.min((state.totalEarnings / 10) * 100, 100);
            elements.progressBar.style.width = `${progressPercent}%`;
            elements.progressPercent.textContent = `${Math.round(progressPercent)}%`;
            
            // Update progress text
            if (state.totalEarnings >= 10) {
                elements.progressText.innerHTML = '<span class="text-green-400">âœ… Withdrawal unlocked!</span>';
                unlockWithdrawalMethods();
            } else {
                const needed = (10 - state.totalEarnings).toFixed(2);
                elements.progressText.textContent = `Need $${needed} more to withdraw`;
            }
            
            // Update activity log
            updateActivityLog();
        }

        // Unlock Withdrawal Methods
        function unlockWithdrawalMethods() {
            // UPI Method
            elements.upiMethod.classList.remove('opacity-60');
            elements.upiMethod.classList.add('border-green-500', 'cursor-pointer');
            elements.upiMethod.innerHTML = `
                <div class="flex items-center">
                    <div class="bg-gradient-to-r from-green-600 to-emerald-600 w-12 h-12 rounded-lg flex items-center justify-center mr-3">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold">UPI Transfer</h4>
                        <p class="text-xs text-gray-400">Instant to Indian banks</p>
                    </div>
                    <div class="text-right">
                        <div class="text-xs text-green-400 font-bold mb-1">READY</div>
                        <button class="bg-green-600 hover:bg-green-700 text-white text-xs font-bold px-3 py-1 rounded-lg transition">
                            Withdraw
                        </button>
                    </div>
                </div>
            `;
            
            // PayPal Method
            elements.paypalMethod.classList.remove('opacity-60');
            elements.paypalMethod.classList.add('border-blue-500', 'cursor-pointer');
            elements.paypalMethod.innerHTML = `
                <div class="flex items-center">
                    <div class="bg-gradient-to-r from-blue-600 to-cyan-600 w-12 h-12 rounded-lg flex items-center justify-center mr-3">
                        <i class="fab fa-paypal text-white text-xl"></i>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold">PayPal</h4>
                        <p class="text-xs text-gray-400">Instant worldwide</p>
                    </div>
                    <div class="text-right">
                        <div class="text-xs text-green-400 font-bold mb-1">READY</div>
                        <button class="bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold px-3 py-1 rounded-lg transition">
                            Withdraw
                        </button>
                    </div>
                </div>
            `;
        }

        // Update Activity Log
        function updateActivityLog() {
            if (state.activityLog.length === 0) {
                elements.activityLog.innerHTML = `
                    <div class="text-center py-6">
                        <i class="fas fa-coins text-gray-600 text-2xl mb-2"></i>
                        <p class="text-gray-500 text-sm">No earnings yet</p>
                        <p class="text-gray-600 text-xs">Watch ads to see your earnings here</p>
                    </div>
                `;
                return;
            }
            
            elements.activityLog.innerHTML = state.activityLog.map(log => {
                if (log.type === 'ad_watched') {
                    return `
                        <div class="bg-gray-800/30 rounded-xl p-3 border border-gray-700/50">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center mr-2">
                                        <i class="fas fa-ad text-xs"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-sm">Ad Watched</p>
                                        <p class="text-xs text-gray-400">${log.time}</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-green-400 font-bold">+$${log.amount.toFixed(2)}</p>
                                    <p class="text-xs text-gray-400">Total: $${log.total.toFixed(2)}</p>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    const methodIcon = log.method === 'upi' 
                        ? '<div class="w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center mr-2"><i class="fas fa-rupee-sign text-xs"></i></div>'
                        : '<div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center mr-2"><i class="fab fa-paypal text-xs"></i></div>';
                    
                    return `
                        <div class="bg-gray-800/30 rounded-xl p-3 border border-gray-700/50">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center">
                                    ${methodIcon}
                                    <div>
                                        <p class="font-medium text-sm">Withdrawal</p>
                                        <p class="text-xs text-gray-400">${log.time} â€¢ ${log.status}</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-red-400 font-bold">-$${log.amount.toFixed(2)}</p>
                                    <p class="text-xs text-gray-400">${log.method.toUpperCase()}</p>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }).join('');
        }

        // Handle Watch Ad
        async function handleWatchAd() {
            if (state.isAdLoading) return;
            
            // Start loading state
            state.isAdLoading = true;
            elements.watchAdBtn.disabled = true;
            elements.watchAdBtn.innerHTML = `
                <div class="spinner inline-block mr-2" style="width: 20px; height: 20px;"></div>
                Loading Ad...
            `;
            
            showToast('Loading Ad', 'Please wait while we load the advertisement...', 'info');
            
            try {
                // Trigger Monetag Rewarded Interstitial Ad
                if (typeof show_10265430 === 'function') {
                    console.log('Starting Monetag ad...');
                    
                    // Set a timeout to handle ad loading issues
                    const timeoutPromise = new Promise((_, reject) => {
                        setTimeout(() => reject(new Error('Ad loading timeout')), 30000);
                    });
                    
                    // Race between ad and timeout
                    await Promise.race([
                        show_10265430(),
                        timeoutPromise
                    ]);
                    
                    // Ad completed successfully
                    handleAdComplete();
                    
                } else {
                    // Fallback for testing
                    console.warn('Monetag SDK not found, using test mode');
                    setTimeout(() => {
                        handleAdComplete();
                    }, 2000);
                }
                
            } catch (error) {
                console.error('Ad error:', error);
                state.isAdLoading = false;
                enableWatchButton();
                
                if (error.message === 'Ad loading timeout') {
                    showToast('Ad Timeout', 'Ad took too long to load. Please try again.', 'error');
                } else {
                    showToast('Ad Error', 'Failed to load ad. Please check your connection and try again.', 'error');
                }
            }
        }

        // Handle Ad Complete
        function handleAdComplete() {
            state.isAdLoading = false;
            enableWatchButton();
            
            // Add earnings
            const earnedAmount = 0.10;
            state.totalEarnings += earnedAmount;
            state.todayEarnings += earnedAmount;
            state.adsWatched++;
            
            // Add to activity log
            const logEntry = {
                type: 'ad_watched',
                amount: earnedAmount,
                total: state.totalEarnings,
                time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),
                date: new Date().toISOString()
            };
            
            state.activityLog.unshift(logEntry);
            if (state.activityLog.length > 20) {
                state.activityLog = state.activityLog.slice(0, 20);
            }
            
            // Save and update
            saveData();
            updateUI();
            
            // Show success
            showToast('Earning Added!', `+$${earnedAmount.toFixed(2)} added to your balance`, 'success');
            
            // Check if withdrawal just unlocked
            if (state.totalEarnings >= 10 && state.totalEarnings - earnedAmount < 10) {
                setTimeout(() => {
                    showToast('ðŸŽ‰ Withdrawal Unlocked!', 'You can now withdraw your earnings!', 'success');
                    // Haptic feedback if available
                    if (navigator.vibrate) {
                        navigator.vibrate([100, 50, 100]);
                    }
                }, 500);
            }
        }

        // Handle Withdrawal
        function handleWithdrawal(method) {
            if (state.totalEarnings < 10) {
                showToast('Minimum Not Met', 'You need at least $10 to withdraw', 'error');
                return;
            }
            
            const amount = state.totalEarnings;
            
            // Add to activity log
            const logEntry = {
                type: 'withdrawal',
                method: method,
                amount: amount,
                time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),
                date: new Date().toISOString(),
                status: 'Processing'
            };
            
            state.activityLog.unshift(logEntry);
            
            // Reset earnings
            state.totalEarnings = 0;
            state.todayEarnings = 0; // Reset today's earnings too
            
            // Save and update
            saveData();
            updateUI();
            
            // Show success
            const methodName = method === 'upi' ? 'UPI Transfer' : 'PayPal';
            showToast('Withdrawal Initiated', `$${amount.toFixed(2)} via ${methodName}`, 'success');
            
            // Lock withdrawal methods again
            lockWithdrawalMethods();
        }

        // Lock Withdrawal Methods
        function lockWithdrawalMethods() {
            // UPI Method
            elements.upiMethod.classList.add('opacity-60');
            elements.upiMethod.classList.remove('border-green-500', 'cursor-pointer');
            elements.upiMethod.innerHTML = `
                <div class="flex items-center">
                    <div class="bg-gradient-to-r from-purple-600 to-indigo-600 w-12 h-12 rounded-lg flex items-center justify-center mr-3">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold">UPI Transfer</h4>
                        <p class="text-xs text-gray-400">Instant to Indian banks</p>
                    </div>
                    <div class="text-right">
                        <div class="text-xs text-gray-500 mb-1">Min $10</div>
                        <i class="fas fa-lock text-gray-500"></i>
                    </div>
                </div>
            `;
            
            // PayPal Method
            elements.paypalMethod.classList.add('opacity-60');
            elements.paypalMethod.classList.remove('border-blue-500', 'cursor-pointer');
            elements.paypalMethod.innerHTML = `
                <div class="flex items-center">
                    <div class="bg-gradient-to-r from-blue-600 to-cyan-600 w-12 h-12 rounded-lg flex items-center justify-center mr-3">
                        <i class="fab fa-paypal text-white text-xl"></i>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold">PayPal</h4>
                        <p class="text-xs text-gray-400">Instant worldwide</p>
                    </div>
                    <div class="text-right">
                        <div class="text-xs text-gray-500 mb-1">Min $10</div>
                        <i class="fas fa-lock text-gray-500"></i>
                    </div>
                </div>
            `;
        }

        // Enable Watch Button
        function enableWatchButton() {
            elements.watchAdBtn.disabled = false;
            elements.watchAdBtn.innerHTML = '<i class="fas fa-play-circle mr-2"></i>WATCH AD & EARN $0.10';
        }

        // Show Toast
        function showToast(title, message, type = 'success') {
            elements.toastTitle.textContent = title;
            elements.toastMessage.textContent = message;
            
            // Set icon based on type
            let icon = 'fa-check';
            let bgColor = 'bg-green-600';
            
            if (type === 'error') {
                icon = 'fa-exclamation-triangle';
                bgColor = 'bg-red-600';
            } else if (type === 'warning') {
                icon = 'fa-exclamation-circle';
                bgColor = 'bg-yellow-600';
            } else if (type === 'info') {
                icon = 'fa-info-circle';
                bgColor = 'bg-blue-600';
            }
            
            elements.toastIcon.innerHTML = `<i class="fas ${icon} text-white"></i>`;
            elements.toastIcon.className = `w-10 h-10 rounded-full ${bgColor} flex items-center justify-center mr-3`;
            
            // Show toast
            elements.toast.style.transform = 'translateY(0)';
            
            // Auto hide after 3 seconds
            setTimeout(() => {
                hideToast();
            }, 3000);
        }

        // Hide Toast
        function hideToast() {
            elements.toast.style.transform = 'translateY(-100px)';
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', initApp);
        
        // Prevent context menu on mobile
        document.addEventListener('contextmenu', (e) => {
            if (window.innerWidth <= 768) {
                e.preventDefault();
            }
        });
        
        // Prevent zoom on double-tap
        let lastTap = 0;
        document.addEventListener('touchend', (e) => {
            const currentTime = new Date().getTime();
            const tapLength = currentTime - lastTap;
            if (tapLength < 300 && tapLength > 0) {
                e.preventDefault();
            }
            lastTap = currentTime;
        });
    </script>
</body>
</html>
