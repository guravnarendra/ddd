<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Spin & Earn Rewards</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- ========================================== -->
    <!-- YOUR MONETAG AD SCRIPT -->
    <!-- ========================================== -->
    <script src='//libtl.com/sdk.js' data-zone='10261712' data-sdk='show_10261712'></script>

    <style>
        /* Disable text selection and tap highlighting for app-like feel */
        body {
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* Wheel Styles */
        .wheel-container {
            position: relative;
            width: 320px;
            height: 320px;
            max-width: 90vw;
            max-height: 90vw;
            margin: 0 auto;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid #ffffff;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            /* This conic gradient creates the colorful slices */
            background: conic-gradient(
                #FF5733 0deg 60deg,
                #33FF57 60deg 120deg,
                #3357FF 120deg 180deg,
                #F333FF 180deg 240deg,
                #FF3333 240deg 300deg,
                #F3FF33 300deg 360deg
            );
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67);
            position: relative;
        }

        /* The white center circle */
        .center-hub {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        /* The triangle marker at the top */
        .marker {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 40px solid #ef4444; /* Red pointer */
            z-index: 20;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
        }

        /* Shine effect on button */
        .btn-shine {
            overflow: hidden;
            position: relative;
        }
        .btn-shine::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shine 3s infinite;
        }
        @keyframes shine {
            0% { left: -100%; }
            20% { left: 100%; }
            100% { left: 100%; }
        }
    </style>
</head>
<body class="bg-slate-900 text-white min-h-screen flex flex-col font-sans">

    <!-- Navbar / Stats -->
    <div class="bg-slate-800 p-4 shadow-md flex justify-between items-center z-30">
        <div>
            <div class="text-xs text-slate-400 font-bold uppercase tracking-wider">Total Points</div>
            <div class="text-3xl font-bold text-yellow-400 flex items-center gap-1">
                <span id="pointsDisplay">0</span>
                <span class="text-lg">ðŸ’Ž</span>
            </div>
        </div>
        <div class="text-right">
            <h1 class="font-bold text-xl italic">SPIN<span class="text-blue-500">WIN</span></h1>
        </div>
    </div>

    <!-- Main Game Area -->
    <div class="flex-grow flex flex-col items-center justify-center p-4">
        
        <!-- Wheel Section -->
        <div class="wheel-container mb-8">
            <div class="marker"></div>
            <div id="wheel" class="wheel">
                <div class="center-hub">â˜…</div>
            </div>
        </div>

        <div class="text-center space-y-2">
            <p id="message" class="text-slate-300 text-lg font-medium h-8">Watch Ad to Spin!</p>
        </div>
    </div>

    <!-- Bottom Action Button -->
    <div class="p-6 bg-slate-800 rounded-t-3xl shadow-[0_-5px_30px_rgba(0,0,0,0.5)] z-30">
        <button id="spinBtn" onclick="handleSpinClick()" class="btn-shine w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white text-2xl font-bold py-5 rounded-2xl shadow-lg transform transition active:scale-95 flex items-center justify-center gap-3">
            <span>ðŸ“º WATCH & SPIN</span>
        </button>
    </div>

    <script>
        // --- Game Configuration ---
        let currentPoints = 0;
        let isSpinning = false;
        
        // DOM Elements
        const wheel = document.getElementById('wheel');
        const spinBtn = document.getElementById('spinBtn');
        const pointsDisplay = document.getElementById('pointsDisplay');
        const messageDisplay = document.getElementById('message');

        /**
         * Main function called when user clicks the button.
         * 1. Checks if ad script is loaded.
         * 2. Shows Ad.
         * 3. On success (.then), spins the wheel.
         */
        function handleSpinClick() {
            if (isSpinning) return;

            // Check if the Monetag function is available
            if (typeof show_10261712 === 'undefined') {
                alert("Ad script is loading or blocked by AdBlocker. Please wait or disable AdBlock.");
                return;
            }

            // Update UI to show loading
            spinBtn.disabled = true;
            spinBtn.classList.add('opacity-50');
            messageDisplay.innerText = "Loading Ad...";

            // --- SHOW THE AD ---
            show_10261712().then(() => {
                // Ad was watched successfully
                messageDisplay.innerText = "Ad Verified! Spinning...";
                performSpin();
            }).catch((e) => {
                // Ad failed to load or was closed early (if SDK supports reject)
                console.error("Ad error:", e);
                messageDisplay.innerText = "Ad skipped or failed. Try again.";
                spinBtn.disabled = false;
                spinBtn.classList.remove('opacity-50');
            });
        }

        /**
         * Handles the visual spinning of the wheel and reward calculation
         */
        function performSpin() {
            isSpinning = true;

            // Calculate a random degree:
            // 3600 (10 full spins) + random segment (0-360)
            const randomDegree = Math.floor(3600 + Math.random() * 360);

            // Apply the rotation
            wheel.style.transform = `rotate(${randomDegree}deg)`;

            // Wait for the transition (4 seconds) to finish
            setTimeout(() => {
                finishSpin(randomDegree);
            }, 4000);
        }

        /**
         * Called after animation stops
         */
        function finishSpin(actualDegree) {
            // Generate random points (e.g., 10 to 100)
            const reward = Math.floor(Math.random() * 90) + 10;
            
            // Update Logic
            currentPoints += reward;
            pointsDisplay.innerText = currentPoints;
            
            // Success Message
            messageDisplay.innerText = `ðŸŽ‰ Won ${reward} Points!`;
            alert(`You have seen an ad and won ${reward} points!`);

            // Reset UI
            isSpinning = false;
            spinBtn.disabled = false;
            spinBtn.classList.remove('opacity-50');

            // Reset Wheel Position Logic
            // We keep the wheel at the current visual rotation but reset the transition
            // so the next spin starts from here smoothly.
            const remainder = actualDegree % 360;
            wheel.style.transition = 'none';
            wheel.style.transform = `rotate(${remainder}deg)`;
            
            // Force a browser reflow (update)
            wheel.offsetHeight; 
            
            // Re-enable transition for next time
            wheel.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67)';
        }
    </script>
</body>
</html>
